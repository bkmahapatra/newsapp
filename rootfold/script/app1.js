const obb = {
  status: "ok",
  totalResults: 33,
  articles: [
    {
      source: {
        id: "reuters",
        name: "Reuters",
      },
      author: null,
      title:
        "Steve Bannon, former Trump adviser, charged with money laundering in border wall scheme - Reuters.com",
      description:
        "Steve Bannon, the longtime ally and onetime top strategist to former U.S. President Donald Trump, has been indicted on money laundering and conspiracy for allegedly deceiving donors to an effort to help Trump build a wall along the U.S.-Mexico border.",
      url: "https://www.reuters.com/world/us/steve-bannon-surrender-thursday-face-new-york-indictment-2022-09-08/",
      urlToImage:
        "https://www.reuters.com/resizer/akrtqmNifOfyO6RlU-wzZnpMp_U=/1200x628/smart/filters:quality(80)/cloudfront-us-east-2.images.arcpublishing.com/reuters/PBIZOXS6K5ONNP5EA4J5U54M64.jpg",
      publishedAt: "2022-09-08T16:28:00Z",
      content:
        "NEW YORK, Sept 8 (Reuters) - Steve Bannon, the longtime ally and onetime top strategist to former U.S. President Donald Trump, has been indicted on money laundering and conspiracy for allegedly decei… [+4693 chars]",
    },
    {
      source: {
        id: null,
        name: "CNBC",
      },
      author: "Jack Stebbins",
      title:
        "Trump-linked SPAC adjourns meeting for three hours to continue vote on merger delay - CNBC",
      description:
        "The SPAC aiming to take former President Donald Trump's media company public adjourned its shareholder meeting by three hours to allow voting to continue on delaying the merger.",
      url: "https://www.cnbc.com/2022/09/08/trump-spac-merger-delay-dwac.html",
      urlToImage:
        "https://image.cnbcfm.com/api/v1/image/107018251-1645533207607-gettyimages-1238680942-AFP_323N3ZF.jpeg?v=1645533286&w=1920&h=1080",
      publishedAt: "2022-09-08T16:07:32Z",
      content:
        "Digital World Acquisition Corp., the SPAC aiming to take former President Donald Trump's media company public, adjourned its shareholder meeting by another three hours to allow voting to continue on … [+1710 chars]",
    },
    {
      source: {
        id: null,
        name: "CNBC",
      },
      author: "Holly Ellyatt",
      title:
        "European markets close higher after ECB rate hike; Stoxx 600 up 0.5% - CNBC",
      description:
        "European markets closed higher on Thursday after the European Central Bank announced a 75 basis point rate hike.",
      url: "https://www.cnbc.com/2022/09/08/european-markets-open-to-close-stocks-news-data-and-earnings.html",
      urlToImage:
        "https://image.cnbcfm.com/api/v1/image/107076151-1655299973535-gettyimages-1241323583-AFP_32CJ7Y3.jpeg?v=1662639813&w=1920&h=1080",
      publishedAt: "2022-09-08T15:34:00Z",
      content:
        "European stocks are expected to open cautiously higher on Wednesday with the U.K.'s FTSE index seen 18 points higher at 7,560, Germany's DAX 33 points higher at 13,944, France's CAC 40 up 18 points a… [+412 chars]",
    },
    {
      source: {
        id: null,
        name: "WGAL Susquehanna Valley Pa.",
      },
      author: "Associated Press",
      title:
        "Doctors 'concerned' about Queen Elizabeth II's health - WGAL Susquehanna Valley Pa.",
      description:
        'Buckingham Palace says Queen Elizabeth II has been placed under medical supervision because doctors are "concerned for Her Majesty\'s health."',
      url: "https://www.wgal.com/article/queen-elizabeth-health/41116274",
      urlToImage:
        "https://kubrick.htvapps.com/htv-prod-media.s3.amazonaws.com/images/queen-elizabeth-1662637752.jpg?crop=1.00xw:0.754xh;0,0.0621xh&resize=1200:*",
      publishedAt: "2022-09-08T15:26:00Z",
      content:
        "LONDON, England —Queen Elizabeth II is under medical supervision at her summer residence in Scotland after doctors raised concerns about the 96-year-old monarch's health, Buckingham Palace said Thurs… [+5589 chars]",
    },
    {
      source: {
        id: null,
        name: "NBCSports.com",
      },
      author: "Mike Florio",
      title: "NFL Week 1 2022 picks - NBC Sports",
      description:
        "Football is back, along with our effort to make sense of what will happen during the various football games.It’s the weekly picks item, with MDS and yours truly doing battle, picking each and every game.I think I won last year. I can’t remember, actually. I a…",
      url: "https://profootballtalk.nbcsports.com/2022/09/08/nfl-week-1-2022-picks/",
      urlToImage:
        "https://profootballtalk.nbcsports.com/wp-content/uploads/sites/25/2022/09/GettyImages-1354743856-e1662648548183.jpg",
      publishedAt: "2022-09-08T14:53:00Z",
      content:
        "Football is back, along with our effort to make sense of what will happen during the various football games.\r\nIts the weekly picks item, with MDS and yours truly doing battle, picking each and every … [+6754 chars]",
    },
    {
      source: {
        id: null,
        name: "Page Six",
      },
      author: "Francesca Bacardi",
      title:
        "Olivia Wilde slams 'horses--t idea' she left Jason Sudeikis for Harry Styles - Page Six",
      description:
        "“Our relationship was over long before I met Harry,” the “Don’t Worry Darling” director said. “Like any relationship that ends, it doesn’t end overnight.”",
      url: "https://pagesix.com/2022/09/08/olivia-wilde-denies-leaving-jason-sudeikis-for-harry-styles/",
      urlToImage:
        "https://pagesix.com/wp-content/uploads/sites/3/2022/09/olivia-wilde-denies-jason-sudekis-harry-styles5-.jpg?quality=75&strip=all&w=1200",
      publishedAt: "2022-09-08T14:46:00Z",
      content:
        "Olivia Wilde is finally reacting to rumors that she left Jason Sudeikis for Harry Styles.\r\nThe complete horses–t idea that I left Jason for Harry is completely inaccurate, the “Don’t Worry Darling” d… [+2777 chars]",
    },
    {
      source: {
        id: "cnn",
        name: "CNN",
      },
      author: "Jennifer Henderson and Nouran Salahieh, CNN",
      title:
        "A Memphis shooting rampage -- part of which was livestreamed -- leaves 4 people dead and 3 wounded, and a suspect is in custody - CNN",
      description:
        "A 19-year-old man was arrested Wednesday after livestreaming part of a shooting rampage that left four people dead and three others injured and upended life throughout Memphis as residents were urged to shelter in place, police said.",
      url: "https://www.cnn.com/2022/09/07/us/memphis-shootings-suspect-detained/index.html",
      urlToImage:
        "https://cdn.cnn.com/cnnnext/dam/assets/220907232726-01-memphis-shootings-suspect-detained-super-tease.jpg",
      publishedAt: "2022-09-08T14:42:00Z",
      content:
        "(CNN)A 19-year-old man was arrested Wednesday after livestreaming part of a shooting rampage that left four people dead and three others injured and upended life throughout Memphis as residents were … [+6540 chars]",
    },
    {
      source: {
        id: null,
        name: "YouTube",
      },
      author: null,
      title: "'World-changing' malaria vaccine developed – BBC News - BBC News",
      description:
        "A malaria vaccine with “world-changing” potential has been developed by UK scientists.The team at the University of Oxford expect it to be rolled out next ye...",
      url: "https://www.youtube.com/watch?v=bHATMZF6AFc",
      urlToImage: "https://i.ytimg.com/vi/bHATMZF6AFc/maxresdefault.jpg",
      publishedAt: "2022-09-08T14:27:40Z",
      content: null,
    },
    {
      source: {
        id: null,
        name: "CNET",
      },
      author: "Eli Blumenthal",
      title:
        "Upgrading to iPhone 14? You Won't Be Able to Just Swap Your Sim Card - CNET",
      description:
        "The latest Apple iPhones get rid of physical SIM cards, instead adding the eSIM.",
      url: "https://www.cnet.com/tech/mobile/upgrading-to-iphone-14-you-wont-be-able-to-just-swap-your-sim-card/",
      urlToImage:
        "https://www.cnet.com/a/img/resize/ab0ee30dff268f8deb89e6060d3e0223d2df745e/2022/09/07/30d6dfbb-8061-4446-a54a-d7a2fecce58d/screen-shot-2022-09-07-at-1-58-36-pm-2.png?auto=webp&fit=crop&height=630&width=1200",
      publishedAt: "2022-09-08T14:20:53Z",
      content:
        "This story is part of Focal Point iPhone 2022, CNET's collection of news, tips and advice around Apple's most popular product. \r\nLooking to upgrade to the iPhone 14? It's not going to be as simple as… [+2475 chars]",
    },
    {
      source: {
        id: null,
        name: "CNET",
      },
      author: "Queenie Wong",
      title:
        "Every iPhone 14 Has Something in Common: Way Longer Battery Life - CNET",
      description:
        "Apple says the new iPhone 14's battery will last all day -- an improvement over the iPhone 13.",
      url: "https://www.cnet.com/tech/mobile/every-iphone-14-has-something-in-common-way-longer-battery-life/",
      urlToImage:
        "https://www.cnet.com/a/img/resize/d54e9bc281e4b7c6be33b1292200d86d3dc0920b/2022/09/07/b73bb023-73eb-4040-900a-35c425d8e11d/iphone-14-plus-2hands-purple.jpg?auto=webp&fit=crop&height=630&width=1200",
      publishedAt: "2022-09-08T14:07:00Z",
      content:
        "This story is part of Focal Point iPhone 2022, CNET's collection of news, tips and advice around Apple's most popular product. \r\nDuring its fall product event on Wednesday, Apple said the iPhone 14 a… [+2124 chars]",
    },
    {
      source: {
        id: "the-verge",
        name: "The Verge",
      },
      author: "Andrew J. Hawkins",
      title:
        "The 2024 Chevy Equinox EV is priced to be everyone's first electric vehicle - The Verge",
      description:
        "The 2024 Chevrolet Equinox EV will have up to 300 miles of range and a starting price of “around $30,000,” making it one of the more affordable electric vehicles on the market.",
      url: "https://www.theverge.com/2022/9/8/23339186/gm-chevy-equinox-ev-announce-price-specs-suv",
      urlToImage:
        "https://cdn.vox-cdn.com/thumbor/Vjjk9OwactipIFEJfdrMvyGX5lI=/0x15:8792x4618/fit-in/1200x630/cdn.vox-cdn.com/uploads/chorus_asset/file/23999602/MY24_Chevrolet_Equinox_EV_3LT.jpg",
      publishedAt: "2022-09-08T13:22:11Z",
      content:
        "General Motors wants to be the biggest seller of electric vehicles in the world, and the new 2024 Chevrolet Equinox EV is intended to play a major role in that effort. Built on GMs Ultium platform, t… [+8309 chars]",
    },
    {
      source: {
        id: "cbs-news",
        name: "CBS News",
      },
      author: null,
      title:
        "Local official, Robert Telles, arrested in slaying of Las Vegas investigative reporter Jeff German - CBS News",
      description:
        "The Las Vegas Review-Journal reported Wednesday that uniformed officers and police vehicles were seen outside the home of Clark County Public Administrator Robert Telles.",
      url: "https://www.cbsnews.com/news/jeff-german-slaying-local-official-robert-telles-arrested-las-vegas-investigative-reporter/",
      urlToImage:
        "https://assets2.cbsnewsstatic.com/hub/i/r/2022/09/06/0d9c1ab6-500a-4e04-b5d5-e33eaaea5f4f/thumbnail/1200x630/354f3e905d22ce31fb928e9f078ca53c/gettyimages-1242951169.jpg",
      publishedAt: "2022-09-08T13:10:00Z",
      content:
        "A Las Vegas-area elected public official was arrested Wednesday as the suspect in the fatal stabbing of a veteran newspaper reporter whose investigations of the official's work preceded his primary l… [+4841 chars]",
    },
    {
      source: {
        id: "cbs-news",
        name: "CBS News",
      },
      author: "Camilo Montoya-Galvez",
      title:
        "U.S. finalizes green card rules, departing from strict Trump requirements - CBS News",
      description:
        "The policy is a dramatic departure from a Trump regulation that made it harder for low-income immigrants to become permanent residents.",
      url: "https://www.cbsnews.com/news/u-s-green-card-rules-departs-trump-requirements/",
      urlToImage:
        "https://assets1.cbsnewsstatic.com/hub/i/r/2022/09/08/03393cbd-332f-4e9f-aab3-01c33aa6b334/thumbnail/1200x630/335c0366a87a2d32a2d9427cc54e45e9/gettyimages-882774424.jpg",
      publishedAt: "2022-09-08T12:46:00Z",
      content:
        "The Biden administration will enact new rules in December governing applications for U.S. residency, departing from stringent Trump-era requirements that made it harder for low-income immigrants to b… [+4419 chars]",
    },
    {
      source: {
        id: "fox-news",
        name: "Fox News",
      },
      author: "Caitlin McFall",
      title:
        "Blinken makes surprise visit to Kyiv to announce $2B military aid for Ukraine, Europe - Fox News",
      description:
        "Secretary of State Antony Blinken announced a $2 billion military financing package for Ukraine and 18 European nations threatened by Russia in surprise trip to Kyiv.",
      url: "https://www.foxnews.com/world/blinken-makes-surprise-visit-kyiv-announce-2b-military-aid-ukraine-europe",
      urlToImage:
        "https://static.foxnews.com/foxnews.com/content/uploads/2022/09/Secretary-of-State-Antony-Blinken-Kyiv-Ukraine.jpg",
      publishedAt: "2022-09-08T12:41:47Z",
      content:
        "Secretary of State Antony Blinken made an unscheduled visit to Kyiv Thursday to announce a $2 billion military aid package for Ukraine and other European nations threatened by Russia.\r\nBlinken told t… [+3139 chars]",
    },
    {
      source: {
        id: "cnn",
        name: "CNN",
      },
      author: "Lisa Respers France, CNN",
      title:
        "Harry Styles jokes about that Chris Pine spitting speculation - CNN",
      description: "At least Harry Styles has a sense of humor?",
      url: "https://www.cnn.com/2022/09/08/entertainment/harry-styles-spit-chris-pine/index.html",
      urlToImage:
        "https://cdn.cnn.com/cnnnext/dam/assets/220908131445-harry-styles-spit-super-tease.jpg",
      publishedAt: "2022-09-08T12:36:00Z",
      content: null,
    },
    {
      source: {
        id: null,
        name: "Deadline",
      },
      author: "Lynette Rice",
      title:
        "‘Dancing With The Stars’ Announces Season 31 Cast, Including First Ever Drag Queen Plus Selma Blair, Cheryl Ladd & More - Deadline",
      description:
        "Dancing with the Stars is logging a couple of firsts in its 31st season. Chief among them: a new digital home, a significant star from a competing broadcast network and its first-ever drag queen competitor. Actor and Performer D.J. “Shangela” Pierce, who was …",
      url: "https://deadline.com/2022/09/dancing-with-the-stars-season-31-cast-first-ever-drag-queen-shangela-1235110881/",
      urlToImage:
        "https://deadline.com/wp-content/uploads/2022/09/Dancing-with-the-stars.jpg?w=1000",
      publishedAt: "2022-09-08T12:30:00Z",
      content:
        "Dancing with the Stars is logging a couple of firsts in its 31st season. Chief among them: a new digital home, a significant star from a competing broadcast network and its first-ever drag queen comp… [+2271 chars]",
    },
    {
      source: {
        id: null,
        name: "New York Post",
      },
      author: "Snejana Farberov",
      title:
        "Body of UK aid worker captured in Ukraine shows signs of 'torture' - New York Post ",
      description:
        "Ukraine’s foreign minister said the body of Paul Urey, 45, who died in July while being held by the rebel Donetsk People’s Republic, was returned on Wednesday, showing signs of “p…",
      url: "https://nypost.com/2022/09/08/body-of-uk-aid-worker-paul-urey-shows-signs-of-unspeakable-torture/",
      urlToImage:
        "https://nypost.com/wp-content/uploads/sites/2/2022/09/urey-captured-comp.jpg?quality=75&strip=all&w=1024",
      publishedAt: "2022-09-08T12:10:00Z",
      content:
        "The body of UK humanitarian worker Paul Urey, who died while being held captive by Russia-backed separatists, has signs of “possible unspeakable torture,” according to a Ukrainian government official… [+4110 chars]",
    },
    {
      source: {
        id: "fox-news",
        name: "Fox News",
      },
      author: "Greg Norman",
      title:
        "Canada manhunt ends as mass stabbing suspect Myles Sanderson dies from self-inflicted wounds, official says - Fox News",
      description:
        "The last suspect being sought by Canadian police following a stabbing spree in Saskatchewan that left 10 dead has died from self-inflicted injuries, an official says.",
      url: "https://www.foxnews.com/world/canada-manhunt-ends-mass-stabbing-suspect-myles-sanderson-dies-self-inflicted-wounds-official-says",
      urlToImage:
        "https://static.foxnews.com/foxnews.com/content/uploads/2022/09/Myles-Sanderson-manhunt.png",
      publishedAt: "2022-09-08T12:09:32Z",
      content:
        "The suspect wanted in connection to a stabbing spree that left 10 dead in the Canadian province of Saskatchewan has died from self-inflicted injuries after police tracked down the stolen car he was t… [+3259 chars]",
    },
    {
      source: {
        id: null,
        name: "ESPN",
      },
      author: "Mackenzie Kraemer",
      title:
        "NFL Week 1 betting notes - Sean McVay's opening week winning streak - ESPN",
      description:
        "NFL betting notes and nuggets from around the league, including the Los Angeles Rams, Dallas Cowboys and more.",
      url: "https://www.espn.com/chalk/story/_/id/34545886/nfl-week-1-betting-notes-nuggets-los-angeles-rams-dallas-cowboys",
      urlToImage:
        "https://a2.espncdn.com/combiner/i?img=%2Fphoto%2F2022%2F0908%2Fr1058852_1296x729_16%2D9.jpg",
      publishedAt: "2022-09-08T12:07:02Z",
      content:
        "After a 2021 season in which underdogs had their fourth straight profitable season (52.6%), the 2022 season begins with underdogs again being the story. Ten teams are listed as home underdogs, the mo… [+13584 chars]",
    },
    {
      source: {
        id: null,
        name: "CBS Sports",
      },
      author: "",
      title:
        "2022 NFL season predictions: Picking the Super Bowl, playoff teams and final standings for all 32 teams - CBS Sports",
      description:
        "The NFL writers here at CBS Sports have made their predictions for the 2022 season",
      url: "https://www.cbssports.com/nfl/news/2022-nfl-season-predictions-picking-the-super-bowl-playoff-teams-and-final-standings-for-all-32-teams/",
      urlToImage:
        "https://sportshub.cbsistatic.com/i/r/2022/09/07/f88dab1c-0df1-490f-85e7-b3cb5c673b7d/thumbnail/1200x675/e0a681eb1cd0cfbc1534911d41fdda82/gettyimages-1370413816.jpg",
      publishedAt: "2022-09-08T12:01:00Z",
      content:
        "The 2022 NFL season is finally here. The league's 32 teams will play 272 games between now and the end of the regular season, then 13 more before we crown a Super Bowl champion in Glendale, Arizona, … [+2391 chars]",
    },
  ],
};
///////////////global variables for state
let country = "in";
let category = "general";
let page = 1;

//rendering slides
const slideShow = (data) => {
  const slides = document.querySelector(".carousel-inner");

  const imga = slides.querySelectorAll("img");
  let count = 0;
  imga.forEach((sld) => {
    sld.src = data[count].urlToImage;
    count++;
  });

  let count2 = 0;
  const crHeading = slides.querySelectorAll("h5");
  crHeading.forEach((hedd) => {
    hedd.innerText = data[count2].title;
    count2++;
  });

  let count3 = 0;
  const crbtn = slides.querySelectorAll("button");
  crbtn.forEach((btn) => {
    const urlm = data[count3].url;
    btn.addEventListener("click", (e) => {
      window.open(urlm);
    });
    count3++;
  });
};

//lengthfix
const fixSize = (str, maxlen) => {
  if (str != null) {
    if (str.length >= maxlen) {
      return str.slice(0, maxlen) + "...";
    } else return str;
  } 
  else return "...";
};

//rednering posts
const newsitems = document.querySelector(".newsitem");
const postRender = (deta) => {
  // const deta=obb.articles;
  newsitems.innerHTML = "";
  for (let i = 5; i <= 19; i++) {
    // console.log(deta);
    newsitems.innerHTML += `<div class="my-2 col-lg-4 col-md-6 col-xl-4">
        
        <div class="card position-relative shadow-lg bg-body rounded" style="width: 18rem;">

        <span class="position-absolute top-0 start-0 translate-middle badge rounded-pill text-bg-warning" >${
          deta[i].source.name!=null?deta[i].source.name:"helonews"
        }</span>

          <img src="${
            deta[i].urlToImage !=null?deta[i].urlToImage:"/rootfold/images/wall1.jpg"
          }" class="card-img-top" alt="..." style="height: 200px;" >
          <div class="card-body">
            <h5 class="card-title">${fixSize(deta[i].title, 65)}</h5>
            <p class="card-text">${fixSize(deta[i].description, 140)}</p>
            <a href="${deta[i].url != null?deta[i].url:"..."}" class="btn btn-primary">Read more</a>
          </div>
        </div>
      </div>
        `;
  }
};

// fetching result function
async function fetchresult(country = "in", category = "general", page = "1") {
  // let urldata = `https://newsapi.org/v2/top-headlines?country=${country}&category=${category}&pagesize=20&page=${page}&apiKey=b3e493cf037a447aac7fb76a6dc968ad`;

  // const data = await fetch(urldata);
  // const obb1 = await data.json();

  slideShow(obb.articles);
  postRender(obb.articles);

  //cehck page
  if(page==1){
    prev.classList.add('disabled');
  }

  

}

fetchresult();
//postRender(obb.articles)

//country selection.........
const dropdown = document.querySelectorAll(".drpbtns button");
const ctcode= document.querySelector(".countrycode");

dropdown.forEach((dt) => {
  dt.addEventListener("click", (e) => {
    country = e.target.value;
    ctcode.innerText=country.toUpperCase();
    fetchresult(country, category);
  });
});


const link = document.querySelectorAll(".linkspath");
const hhbtn=document.querySelector(".hbtn");

function off(){
    hhbtn.classList.remove('active');
    link.forEach(dt=>{
        dt.classList.remove("active");
    })
}
link.forEach((dt) => {
  dt.addEventListener("click", (e) => {
    off();
    category = e.target.innerText.toString().toLowerCase();
    console.log(category);
    dt.classList.add("active");

    fetchresult(country, category);
  });
});


//pagination
const prev=document.querySelector('.previous');
const next=document.querySelector('.next');



prev.addEventListener('click',(e)=>{
    page--;
    fetchresult(country,category,page);
});
next.addEventListener('click',(e)=>{
    page++;
    fetchresult(country,category,page);
    prev.classList.remove('disabled');
});

const totalsecs=obb.totalResults;

const  pagebtns=document.querySelectorAll(".pages");
pagebtns.forEach(btns=>{
    btns.addEventListener('click',(e)=>{
        let pagenum=parseInt(e.target.innerText);
        fetchresult(country,category,pagenum);
    });
})